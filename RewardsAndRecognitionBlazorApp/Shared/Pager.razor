@using Microsoft.AspNetCore.Components

@code {
    [Parameter] public int PageNumber { get; set; }
    [Parameter] public int PageSize { get; set; }
    [Parameter] public long TotalCount { get; set; }
    [Parameter] public EventCallback<int> PageChanged { get; set; }

    private int TotalPages => (int)Math.Ceiling(TotalCount / (double)PageSize);

    private async Task SetPage(int p)
    {
        if (p < 1 || p > TotalPages) return;
        if (p == PageNumber) return;
        await PageChanged.InvokeAsync(p);
    }
}
<nav aria-label="Pager">
    <ul class="pagination">
        <li class="page-item @(PageNumber == 1 ? "disabled" : "")">
            <a class="page-link" href="#" @onclick:preventDefault @onclick="() => SetPage(PageNumber - 1)">Previous</a>
        </li>

        @if (TotalPages <= 7)
        {
            @for (int i = 1; i <= TotalPages; i++)
            {
                <li class="page-item @(i == PageNumber ? "active" : "")">
                    <a class="page-link" href="#" @onclick:preventDefault @onclick="() => SetPage(i)">@i</a>
                </li>
            }
        }
        else
        {
            var start = Math.Max(1, PageNumber - 3);
            var end = Math.Min(TotalPages, start + 6);

            if (start > 1)
            {
                <li class="page-item">
                    <a class="page-link" href="#" @onclick:preventDefault @onclick="() => SetPage(1)">1</a>
                </li>
                <li class="page-item disabled"><span class="page-link">...</span></li>
            }

            for (int i = start; i <= end; i++)
            {
                <li class="page-item @(i == PageNumber ? "active" : "")">
                    <a class="page-link" href="#" @onclick:preventDefault @onclick="() => SetPage(i)">@i</a>
                </li>
            }

            if (end < TotalPages)
            {
                <li class="page-item disabled"><span class="page-link">...</span></li>
                <li class="page-item">
                    <a class="page-link" href="#" @onclick:preventDefault @onclick="() => SetPage(TotalPages)">@TotalPages</a>
                </li>
            }
        }

        <li class="page-item @(PageNumber == TotalPages ? "disabled" : "")">
            <a class="page-link" href="#" @onclick:preventDefault @onclick="() => SetPage(PageNumber + 1)">Next</a>
        </li>
    </ul>
</nav>
